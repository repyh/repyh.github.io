const cards=[generateCard()],opDeck=[generateCard()];let gameState=1;function initDealer(){const e=document.querySelector(".dealer");e.innerHTML="";const t=document.createElement("h5");t.innerText=`Dealer's Value - ${opDeck.map(e=>getCardValue(e)).reduce((e,t)=>e+t)}`,e.appendChild(t)}function init(){const e=document.querySelector("tr");e.innerHTML="";for(let t=0;t<cards.length;t++){const n=document.createElement("th"),c=document.createElement("img");c.src=`https://deckofcardsapi.com/static/img/${cards[t]}.png`,n.scope="col",n.appendChild(c),n.classList.add("card"),e.appendChild(n)}}function checkWinCondition(){const e=cards.map(e=>getCardValue(e)).reduce((e,t)=>e+t),t=opDeck.map(e=>getCardValue(e)).reduce((e,t)=>e+t);return!(e>21)&&!(21-e>21-t&&t<=21)}function generateCard(){const e=["A","2","3","4","5","6","7","8","9","0","J","Q","K"],t=["D","S","C","H"];return`${e[Math.floor(Math.random()*e.length)]}${t[Math.floor(Math.random()*t.length)]}`}function getCardValue(e){const t=e.split("")[0];return isNaN(t)?["J","Q","K"].includes(t)?10:1:Number(t.replace("0","10"))}function hit(e){return e.push(generateCard()),e}window.onload=(()=>{init(),initDealer()}),document.querySelector("#hit").addEventListener("click",e=>{if(e.preventDefault(),1===gameState)for(hit(cards),init();opDeck.map(e=>getCardValue(e)).reduce((e,t)=>e+t)<16;)hit(opDeck)}),document.querySelector("#stand").addEventListener("click",e=>{e.preventDefault(),hit(cards),init();const t=document.querySelector(".title-content"),n=document.createElement("h1");n.innerText=checkWinCondition()?"You win!":"You lose!",t.appendChild(n),gameState=0;const c=document.querySelector(".content");c.innerHTML=c.innerHTML+'\n<button type="button" id="new" onclick="location.reload()" class="btn btn-primary" class="functional">New Game</button>',initDealer()});
